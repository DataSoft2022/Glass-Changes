* Multiple Stock Entry
  this feature creates multiple *Stock Entry* for every work order
  depending on items source warehouse.

** Scripts

***  Stock Entry
    added the following script

    #+BEGIN_SRC js
     function is_saved_doc(frm) {
    if(frappe.get_doc("Stock Entry", {'name': frm.doc.name}) == null ||frappe.get_doc("Stock Entry", {'name': frm.doc.name}).__unsaved == 1 ) {
	return false
    }
    return true 
}

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

frappe.ui.form.on('Stock Entry', {
    refresh: function(frm) {
        frm.add_custom_button(('Spread'), function(){
            frm.save();
            async function spreading() {
		while(!is_saved_doc(frm)) {
                    await sleep(500);
		}
		let item = frm.doc.items[0].s_warehouse;
		let found = 0;
		for(let i = 0; i < frm.doc.items.length; i++)
		    if(frm.doc.items[i].s_warehouse != item) {
			found = 1;
			break;
		    }
		if(found === 1) {
    		    frappe.call({
    			method: 'glass.api.multi_stock_entry',
    			args: {
    			    'doc': frm.doc.name
    			},
    			callback: function(r) {
    		            frappe.show_alert({
				message:__('Spreading done Successfully'),
				indicator:'green'
                            }, 5);

    			}
    		    });
		}
            }
            spreading();

        });
    },
});
    #+END_SRC

** apps

*** Glass
    created glass app
    SRC: [[https://github.com/DataSoft2022/Glass.git][Glass]]
